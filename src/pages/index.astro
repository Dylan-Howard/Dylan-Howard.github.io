---
import { getCollection } from "astro:content";

import Layout from "../layouts/Layout.astro"
import Card from "../components/Card.astro";
import ConnectForm from "../components/ConnectForm.astro";
import Grid from "../components/Grid.astro";
import Header from "../components/Header.astro";
import Section from "../components/Section.astro";

const projects = await getCollection('projects');
projects.sort((a, b) =>  new Date(b.data.date).getTime() - new Date(a.data.date).getTime());

---
<Layout>
    <Header title="Dylan Howard" subtitle="Software Engineer" />
    <Section id="my-work" title="My Work">
        <Grid>
            {
                projects.map((prj) => (
                    <Card
                        description={prj.data.description}
                        id={prj.slug}
                        imgSource={prj.data.image.src}
                        imgAlt={prj.data.image.alt}
                        link={`projects/${prj.slug}`}
                        supportingText={
                            prj.data.tags.join(' â€¢ ')
                        }
                        title={prj.data.title}
                    />
                ))
            }
        </Grid>
    </Section>
    <Section id="interest-form" title="Connect">
        <ConnectForm />
    </Section>
    <Section component="aside">
        <img src="./assets/LightIcons.svg" alt="Icons" />
    </Section>
</Layout>
    